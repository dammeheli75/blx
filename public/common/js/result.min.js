$(document).ready(function(){var a="";$("#grid").kendoGrid({columns:[{field:"fullName",title:"Họ và tên",width:200},{field:"birthday",title:"Năm sinh",width:100,attributes:{style:"text-align: center"},template:function(b){return kendo.toString(kendo.parseDate(b.birthday,"yyyy-MM-dd"),"dd/MM/yyyy")}},{field:"address",title:"Địa chỉ",width:220},{field:"collaborator",title:"CTV",width:103},{field:"result",title:"Kết quả",width:125,attributes:{style:"text-align: center"},template:function(b){switch(b.result){case"fail_ theoretical":return"Trượt lý thuyết";break;case"pass":return"Đạt";break;case"absence":return"Vắng mặt";break;case"fail_practice":return"Trượt thực hành";break;default:return"<em>Chưa có</em>";break}}},{field:"license",title:"Bằng",template:function(b){if(b.licenseFront&&b.licenseBack){return'<a data-toggle="tooltip" class="license" data-original-title="Click để xem ảnh lớn" data-placement="left"><img width="50" height="32" src="'+b.licenseFront+'" data-original-title="Click để xem ảnh lớn" data-placement="right">&nbsp;&nbsp;<img width="50" height="32" data-toggle="tooltip" class="license" src="'+b.licenseBack+'"></a>'}return"<em>Chưa có bằng</em>"},attributes:{style:"text-align: center"}}],dataSource:{transport:{read:baseUrl+"ket-qua-thi/read"},schema:{total:"total",data:function(b){return b.students||[]}},serverPaging:true,serverFiltering:true,pageSize:50},pageable:{messages:{display:"Hiển thị {0}-{1}/{2} hồ sơ"}},height:function(){return $(window).height()-130},dataBound:function(){var b=this;$('[data-toggle="tooltip"]').tooltip();$("#fixture-search").find('input[name="q"]').on("change keydown paste input",function(){var c=$(this).val();if(c!=a&&(c[c.length-1]==" "||c=="")){b.dataSource.filter({field:"fullName",operator:"contains",value:c});a=c}});$("#fixture-search").submit(function(){var c=$(this).find('input[name="q"]').val();if(c!=a){b.dataSource.filter({field:"fullName",operator:"contains",value:c});a=c}return false});$(".license").click(function(){var c=b.dataSource.getByUid($(this).parent().parent().attr("data-uid"));kendo.bind($("#license-detail-modal"),c);$("#license-detail-modal").modal("show");$("#licenseDetailTab").find("a").click(function(d){d.preventDefault();$(this).tab("show")})})}});$(window).resize(function(){$("#grid").height($(window).height()-130);$(".k-grid-content").height($("#grid").height()-80)})});
$(document).ready(function(){$("#gridOld").kendoGrid({columns:[{field:"ID",title:"ID",width:60,attributes:{style:"text-align: center"},filterable:false},{field:"fullName",title:"Họ và tên",width:180,template:function(a){return'<a class="tooltip-cell" data-toggle="tooltip" title="Năm sinh: '+kendo.toString(a.birthday,"dd/MM/yyyy")+'">'+a.name+"</a>"},filterable:false},{field:"birthday",title:"Năm sinh",template:'#= kendo.toString(birthday,"dd/MM/yyyy") #',editor:function(a,b){$('<input name="birthday" style="border-radius: 0" data-bind="value:'+b.field+'"/>').appendTo(a).kendoDatePicker({depth:"year",format:"dd/MM/yyyy"})},hidden:true,filterable:false},{field:"address",title:"Địa chỉ",width:260,filterable:false},{field:"phoneNumber",title:"Điện thoại",width:110,filterable:false},{field:"collaborator",title:"CTV",width:110,filterable:false,template:"#= collaborator.title #",editor:function(a,b){$('<input data-bind="value:'+b.field+'"/>').appendTo(a).kendoDropDownList({dataTextField:"title",dataValueField:"value",dataSource:{transport:{read:"http://localhost/blx/public/administrator/collaborator/read",dataType:"json"},schema:{data:"collaborators",total:"total"}}})}},{field:"testDate",title:"Ngày thi",width:100,filterable:false,attributes:{style:"text-align: center;"},format:"{0:dd/MM/yyyy}",template:function(a){if(a.testDate){return'<a class="tooltip-cell" data-toggle="tooltip" title="'+a.testVenue+'">'+kendo.toString(a.testDate,"dd/MM/yyyy")+"</a>"}else{return"--"}},editor:function(a,b){$('<input style="border-radius: 0" data-bind="value:'+b.field+'"/>').appendTo(a).kendoDatePicker({depth:"year",format:"dd/MM/yyyy"})}},{field:"testVenue",title:"Địa điểm thi",hidden:true,editor:function(a,b){$('<input data-bind="value:'+b.field+'"/>').appendTo(a).kendoDropDownList({dataTextField:"title",dataValueField:"ID",dataSource:{transport:{read:{url:"http://localhost/blx/public/administrator/venue/read",dataType:"json"}}}})},filterable:false},{field:"testStatus",title:"Thi",filterable:false,width:80,template:function(a){switch(a.testStatus){case 1:return"Trượt LT";break;case 2:return"Đạt";break;case 3:return"Vắng mặt";break;case 4:return"Trượt TH";break;default:return"--";break}},editor:function(a,b){$('<input data-bind="value:'+b.field+'"/>').appendTo(a).kendoDropDownList({dataTextField:"title",dataValueField:"value",dataSource:[{title:"Kết quả thi",value:0},{title:"Trượt lý thuyết",value:1},{title:"Đạt",value:2},{title:"Vắng mặt",value:3},{title:"Trượt thực hành",value:4}]})}},{field:"licenseFront",title:"BLX&nbsp;<sup>trước</sup>",width:76,filterable:false,attributes:{style:"text-align: center;"},template:function(a){if(a.licenseFront){return'<img width="50" height="32" src="'+a.licenseFront+'" alt="Bằng lái xe của '+a.name+'">'}else{return"--"}},sortable:false},{field:"licenseBack",title:"BLX&nbsp;<sup>sau</sup>",width:76,filterable:false,attributes:{style:"text-align: center;"},template:function(a){if(a.licenseBack){return'<img width="50" height="32" src="'+a.licenseBack+'" alt="Bằng lái xe của '+a.name+'">'}else{return"--"}},sortable:false},{field:"note",title:"Ghi chú",filterable:false,sortable:false},{command:[{name:"edit",text:"Sửa"},{name:"destroy",text:"Xoá"}],title:"&nbsp;",width:160,attributes:{style:"padding-left: 15px"}}],height:function(){return $(window).height()-66},pageable:{pageSize:50,messages:{display:"Hiển thị {0}-{1}/{2} hồ sơ"}},sortable:true,resizable:true,filterable:{extra:false,messages:{info:"Điều kiện lọc: ",filter:"Lọc",clear:"Xoá",isFalse:"False",isTrue:"True"},operators:{string:{contains:"Có chứa"},date:{gt:"Sau ngày",lt:"Trước ngày",eq:"Là ngày"}}},editable:{mode:"popup",confirmation:"Có chắc chắn muốn xoá?"},toolbar:[{name:"create",text:"Thêm hồ sơ"}],dataSource:{transport:{read:{url:"http://localhost/blx/public/administrator/profiles/read",type:"GET"},create:{url:"http://localhost/blx/public/administrator/profiles/create",type:"POST"},update:{url:"http://localhost/blx/public/administrator/profiles/update",type:"POST"},destroy:{url:"http://localhost/blx/public/administrator/profiles/destroy",type:"POST"}},schema:{data:function(a){return a.profiles||[]},total:"total",model:{id:"ID",fields:{ID:{editable:false,nullable:false},fullName:{nullable:false,validation:{required:true}},birthday:{nullable:false,validation:{required:true}},address:{filterable:false,nullable:false,validation:{required:true}},phoneNumber:{nullable:false,validation:{required:true}},test:{status:{nullable:true},venue:{nullable:true},date:{nullable:true}},collaborator:{type:"string"},license:{front:{type:"string"},back:{type:"string"}},note:{type:"string"},time_created:{type:"string"}}}}},dataBound:function(){$('[data-toggle="tooltip"]').tooltip({placement:"right"})}});$(".k-grid-toolbar").css("overflow","hidden").prepend('<h1 class="pull-left" style="font-size: 18px;color: #3b5998;margin: 0;padding: 0;line-height: 28px; font-weight: normal">Danh sách hồ sơ</h1>');$(".k-grid-toolbar .k-grid-add").addClass("pull-right")});
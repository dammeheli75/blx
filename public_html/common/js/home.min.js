$(document).ready(function(){$(".carousel").carousel({interval:5000})});function initialize(){var d=$("tbody tr");var a=[],g=[],f=[];d.each(function(i,j){var k=$(j).attr("data-longitude");var n=$(j).attr("data-latitude");var m=$(j).attr("data-title");var l=$(j).attr("data-info");var h=new google.maps.LatLng(k,n);a.push(h);g.push(new google.maps.Marker({position:h,animation:google.maps.Animation.DROP,title:m}));f.push(new google.maps.InfoWindow({content:l}))});var b={zoom:18,mapTypeId:google.maps.MapTypeId.ROADMAP};if(a.length>0){b.center=a[0]}google.maps.visualRefresh=true;var e=new google.maps.Map(document.getElementById("map-canvas"),b);for(var c=0;c<g.length;c++){(function(){var h=g[c];var i=f[c];h.setMap(e);google.maps.event.addListener(h,"click",function(){i.open(e,h)})})()}d.each(function(h,i){$(i).click(function(){e.panTo(a[h])})});$("#findNearestLocation").click(function(){var i=Boolean();if(navigator.geolocation){i=true;navigator.geolocation.getCurrentPosition(function(k){var l=new google.maps.LatLng(k.coords.latitude,k.coords.longitude);var j=new google.maps.DistanceMatrixService();j.getDistanceMatrix({origins:[l],destinations:a,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC,durationInTraffic:true,avoidHighways:false,avoidTolls:false},function(p,m){var o=[],q,n=null;for(q=0;q<p.rows[0].elements.length;q++){o.push(p.rows[0].elements[q].duration.value)}var r=Math.min.apply(Math,o);for(q=0;q<o.length;q++){if(o[q]==r){n=q;break}}if(n!=null){d.each(function(s,t){if(s==n){$(t).addClass("nearestLocation");e.panTo(a[n])}})}})},function(){h(i)})}else{i=false;h(i)}function h(j){if(j==true){alert("Không thể xác định vị trí hiện tại của bạn.")}else{alert("Trình duyệt của bạn không hỗ trợ định vị hoặc bạn chưa/không cho phép chúng tôi định vị bạn.")}e.panTo(a[0])}})}function loadScript(){var a=document.createElement("script");a.type="text/javascript";a.src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDYGj0U9_vBLmQ6NhzN7R_T2vBS-Up_UvQ&sensor=true&callback=initialize&v=3";document.body.appendChild(a)}window.onload=loadScript;
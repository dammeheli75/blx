$(document).ready(function(){var a="";$("#grid").kendoGrid({columns:[{field:"fullName",title:"Họ và tên",width:200},{field:"birthday",title:"Năm sinh",width:100,attributes:{style:"text-align: center"},template:function(b){return kendo.toString(kendo.parseDate(b.birthday,"yyyy-MM-dd"),"dd/MM/yyyy")}},{field:"address",title:"Địa chỉ",width:220},{field:"collaborator",title:"CTV",width:103},{field:"result",title:"Kết quả",width:125,attributes:{style:"text-align: center"},template:function(b){switch(b.result){case"fail_ theoretical":return"Trượt lý thuyết";break;case"pass":return"Đạt";break;case"absence":return"Vắng mặt";break;case"fail_practice":return"Trượt thực hành";break;default:return"<em>Chưa có</em>";break}}},{field:"license",title:"Bằng",template:function(b){if(b.licenseFront){return'<a data-toggle="tooltip" class="license" data-original-title="Click để xem ảnh lớn" data-placement="left"><img width="50" height="32" src="'+b.licenseFront+'" data-original-title="Click để xem ảnh lớn" data-placement="right"></a>'}return"<em>Chưa có bằng</em>"},attributes:{style:"text-align: center"}}],dataSource:{transport:{read:baseUrl+"ket-qua-thi/read"},schema:{total:"total",data:function(b){return b.students||[]}},serverPaging:true,serverFiltering:true,pageSize:50},pageable:{messages:{display:"Hiển thị {0}-{1}/{2} hồ sơ"}},height:function(){return $(window).height()-130},dataBound:function(){var c=this;var d=$("#fixture-search");var b=$("#license-detail-modal");$('[data-toggle="tooltip"]').tooltip();d.find('input[name="q"]').on("change keydown paste input",function(){var e=encodeURIComponent($(this).val().trim());if(e!=a&&(e[e.length-1]==" "||e=="")){c.dataSource.filter({field:"fullName",operator:"contains",value:e});a=e}});d.submit(function(){var e=encodeURIComponent($(this).find('input[name="q"]').val().trim());if(e!=a){c.dataSource.filter({field:"fullName",operator:"contains",value:e});a=e}return false});$(".license").click(function(){var e=c.dataSource.getByUid($(this).parent().parent().attr("data-uid"));kendo.bind(b,e);b.modal("show");$("#licenseDetailTab").find("a").click(function(f){f.preventDefault();$(this).tab("show")})})}});$(window).resize(function(){var b=$("#grid");b.height($(window).height()-130);$(".k-grid-content").height(b.height()-80)})});